{
  "version": 3,
  "sources": ["../bundle-xdTUI3/checked-fetch.js", "../../../../../AppData/Local/npm-cache/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/common.ts", "../../../../../AppData/Local/npm-cache/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/loader-sw.ts", "../../../../../AppData/Local/npm-cache/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../AppData/Local/npm-cache/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-xdTUI3/middleware-insertion-facade.js", "../../../workers/index.ts"],
  "sourceRoot": "C:\\Users\\class\\webflow-apps\\webflow-app-template-react\\.wrangler\\tmp\\dev-IxHYXI",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "import {\n\t__facade_invoke__,\n\t__facade_register__,\n\t__facade_registerInternal__,\n\tAwaitable,\n\tDispatcher,\n\tIncomingRequest,\n\tMiddleware,\n} from \"./common\";\n\nexport { __facade_register__, __facade_registerInternal__ };\n\n// Miniflare 2's `EventTarget` follows the spec and doesn't allow exceptions to\n// be caught by `dispatchEvent`. Instead it has a custom `ThrowingEventTarget`\n// class that rethrows errors from event listeners in `dispatchEvent`.\n// We'd like errors to be propagated to the top-level `addEventListener`, so\n// we'd like to use `ThrowingEventTarget`. Unfortunately, `ThrowingEventTarget`\n// isn't exposed on the global scope, but `WorkerGlobalScope` (which extends\n// `ThrowingEventTarget`) is. Therefore, we get at it in this nasty way.\nlet __FACADE_EVENT_TARGET__: EventTarget;\nif ((globalThis as any).MINIFLARE) {\n\t__FACADE_EVENT_TARGET__ = new (Object.getPrototypeOf(WorkerGlobalScope))();\n} else {\n\t__FACADE_EVENT_TARGET__ = new EventTarget();\n}\n\nfunction __facade_isSpecialEvent__(\n\ttype: string\n): type is \"fetch\" | \"scheduled\" {\n\treturn type === \"fetch\" || type === \"scheduled\";\n}\nconst __facade__originalAddEventListener__ = globalThis.addEventListener;\nconst __facade__originalRemoveEventListener__ = globalThis.removeEventListener;\nconst __facade__originalDispatchEvent__ = globalThis.dispatchEvent;\n\nglobalThis.addEventListener = function (type, listener, options) {\n\tif (__facade_isSpecialEvent__(type)) {\n\t\t__FACADE_EVENT_TARGET__.addEventListener(\n\t\t\ttype,\n\t\t\tlistener as EventListenerOrEventListenerObject,\n\t\t\toptions\n\t\t);\n\t} else {\n\t\t__facade__originalAddEventListener__(type, listener, options);\n\t}\n};\nglobalThis.removeEventListener = function (type, listener, options) {\n\tif (__facade_isSpecialEvent__(type)) {\n\t\t__FACADE_EVENT_TARGET__.removeEventListener(\n\t\t\ttype,\n\t\t\tlistener as EventListenerOrEventListenerObject,\n\t\t\toptions\n\t\t);\n\t} else {\n\t\t__facade__originalRemoveEventListener__(type, listener, options);\n\t}\n};\nglobalThis.dispatchEvent = function (event) {\n\tif (__facade_isSpecialEvent__(event.type)) {\n\t\treturn __FACADE_EVENT_TARGET__.dispatchEvent(event);\n\t} else {\n\t\treturn __facade__originalDispatchEvent__(event);\n\t}\n};\n\ndeclare global {\n\tvar addMiddleware: typeof __facade_register__;\n\tvar addMiddlewareInternal: typeof __facade_registerInternal__;\n}\nglobalThis.addMiddleware = __facade_register__;\nglobalThis.addMiddlewareInternal = __facade_registerInternal__;\n\nconst __facade_waitUntil__ = Symbol(\"__facade_waitUntil__\");\nconst __facade_response__ = Symbol(\"__facade_response__\");\nconst __facade_dispatched__ = Symbol(\"__facade_dispatched__\");\n\nclass __Facade_ExtendableEvent__ extends Event {\n\t[__facade_waitUntil__]: Awaitable<unknown>[] = [];\n\n\twaitUntil(promise: Awaitable<any>) {\n\t\tif (!(this instanceof __Facade_ExtendableEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\tthis[__facade_waitUntil__].push(promise);\n\t}\n}\n\ninterface FetchEventInit extends EventInit {\n\trequest: Request;\n\tpassThroughOnException: FetchEvent[\"passThroughOnException\"];\n}\n\nclass __Facade_FetchEvent__ extends __Facade_ExtendableEvent__ {\n\t#request: Request;\n\t#passThroughOnException: FetchEvent[\"passThroughOnException\"];\n\t[__facade_response__]?: Awaitable<Response>;\n\t[__facade_dispatched__] = false;\n\n\tconstructor(type: \"fetch\", init: FetchEventInit) {\n\t\tsuper(type);\n\t\tthis.#request = init.request;\n\t\tthis.#passThroughOnException = init.passThroughOnException;\n\t}\n\n\tget request() {\n\t\treturn this.#request;\n\t}\n\n\trespondWith(response: Awaitable<Response>) {\n\t\tif (!(this instanceof __Facade_FetchEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\tif (this[__facade_response__] !== undefined) {\n\t\t\tthrow new DOMException(\n\t\t\t\t\"FetchEvent.respondWith() has already been called; it can only be called once.\",\n\t\t\t\t\"InvalidStateError\"\n\t\t\t);\n\t\t}\n\t\tif (this[__facade_dispatched__]) {\n\t\t\tthrow new DOMException(\n\t\t\t\t\"Too late to call FetchEvent.respondWith(). It must be called synchronously in the event handler.\",\n\t\t\t\t\"InvalidStateError\"\n\t\t\t);\n\t\t}\n\t\tthis.stopImmediatePropagation();\n\t\tthis[__facade_response__] = response;\n\t}\n\n\tpassThroughOnException() {\n\t\tif (!(this instanceof __Facade_FetchEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#passThroughOnException();\n\t}\n}\n\ninterface ScheduledEventInit extends EventInit {\n\tscheduledTime: number;\n\tcron: string;\n\tnoRetry: ScheduledEvent[\"noRetry\"];\n}\n\nclass __Facade_ScheduledEvent__ extends __Facade_ExtendableEvent__ {\n\t#scheduledTime: number;\n\t#cron: string;\n\t#noRetry: ScheduledEvent[\"noRetry\"];\n\n\tconstructor(type: \"scheduled\", init: ScheduledEventInit) {\n\t\tsuper(type);\n\t\tthis.#scheduledTime = init.scheduledTime;\n\t\tthis.#cron = init.cron;\n\t\tthis.#noRetry = init.noRetry;\n\t}\n\n\tget scheduledTime() {\n\t\treturn this.#scheduledTime;\n\t}\n\n\tget cron() {\n\t\treturn this.#cron;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\n__facade__originalAddEventListener__(\"fetch\", (event) => {\n\tconst ctx: ExecutionContext = {\n\t\twaitUntil: event.waitUntil.bind(event),\n\t\tpassThroughOnException: event.passThroughOnException.bind(event),\n\t};\n\n\tconst __facade_sw_dispatch__: Dispatcher = function (type, init) {\n\t\tif (type === \"scheduled\") {\n\t\t\tconst facadeEvent = new __Facade_ScheduledEvent__(\"scheduled\", {\n\t\t\t\tscheduledTime: Date.now(),\n\t\t\t\tcron: init.cron ?? \"\",\n\t\t\t\tnoRetry() {},\n\t\t\t});\n\n\t\t\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\t\t\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n\t\t}\n\t};\n\n\tconst __facade_sw_fetch__: Middleware = function (request, _env, ctx) {\n\t\tconst facadeEvent = new __Facade_FetchEvent__(\"fetch\", {\n\t\t\trequest,\n\t\t\tpassThroughOnException: ctx.passThroughOnException,\n\t\t});\n\n\t\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\t\tfacadeEvent[__facade_dispatched__] = true;\n\t\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n\n\t\tconst response = facadeEvent[__facade_response__];\n\t\tif (response === undefined) {\n\t\t\tthrow new Error(\"No response!\"); // TODO: proper error message\n\t\t}\n\t\treturn response;\n\t};\n\n\tevent.respondWith(\n\t\t__facade_invoke__(\n\t\t\tevent.request as IncomingRequest,\n\t\t\tglobalThis,\n\t\t\tctx,\n\t\t\t__facade_sw_dispatch__,\n\t\t\t__facade_sw_fetch__\n\t\t)\n\t);\n});\n\n__facade__originalAddEventListener__(\"scheduled\", (event) => {\n\tconst facadeEvent = new __Facade_ScheduledEvent__(\"scheduled\", {\n\t\tscheduledTime: event.scheduledTime,\n\t\tcron: event.cron,\n\t\tnoRetry: event.noRetry.bind(event),\n\t});\n\n\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n});\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport { __facade_registerInternal__ } from \"C:\\\\Users\\\\class\\\\AppData\\\\Local\\\\npm-cache\\\\_npx\\\\32026684e21afda6\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\loader-sw.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\class\\\\AppData\\\\Local\\\\npm-cache\\\\_npx\\\\32026684e21afda6\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\class\\\\AppData\\\\Local\\\\npm-cache\\\\_npx\\\\32026684e21afda6\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\t\t\t\t__facade_registerInternal__([__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default])", "export {}; // Ensure this file is treated as a module\r\n\r\n// Define Cloudflare Workers types\r\ninterface FetchEvent extends Event {\r\n  request: Request;\r\n  respondWith(response: Response | Promise<Response>): void;\r\n}\r\n\r\n// Define allowed domains for CORS\r\nconst allowedOrigins: string[] = [\r\n  'https://webflow.com', \r\n  'https://*.webflow-ext.com', \r\n  'https://*.webflow.io',\r\n  'http://localhost:1337',  // For local development\r\n  'http://localhost:5173'   // For Vite development server\r\n];\r\n\r\n// Create a pattern to test domains against\r\nconst createDomainPattern = (domain: string): RegExp => {\r\n  if (domain.includes('*')) {\r\n    return new RegExp('^' + domain.replace('*.', '([a-zA-Z0-9-]+\\\\.)?') + '$');\r\n  }\r\n  return new RegExp('^' + domain + '$');\r\n};\r\n\r\nconst originPatterns: RegExp[] = allowedOrigins.map(createDomainPattern);\r\n\r\n// Check if origin is allowed\r\nconst isAllowedOrigin = (origin: string | null): boolean => {\r\n  if (!origin) return false;\r\n  return originPatterns.some(pattern => pattern.test(origin));\r\n};\r\n\r\n// Handle CORS headers\r\nconst handleCors = (request: Request): Response | null => {\r\n  const origin = request.headers.get('Origin');\r\n  \r\n  if (!origin || !isAllowedOrigin(origin)) {\r\n    return new Response('Forbidden', { status: 403 });\r\n  }\r\n  \r\n  if (request.method === 'OPTIONS') {\r\n    return new Response(null, {\r\n      status: 204,\r\n      headers: {\r\n        'Access-Control-Allow-Origin': origin,\r\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\r\n        'Access-Control-Allow-Headers': 'Content-Type',\r\n        'Access-Control-Max-Age': '86400',\r\n      }\r\n    });\r\n  }\r\n  \r\n  return null;\r\n};\r\n\r\n// =======================================\r\n// SEO ANALYSIS LOGIC\r\n// =======================================\r\n\r\nfunction escapeRegExp(str: string): string {\r\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\n\r\nfunction calculateKeyphraseDensity(content: string, keyphrase: string): {\r\n  density: number;\r\n  occurrences: number;\r\n  totalWords: number;\r\n} {\r\n  const normalizedContent = content.toLowerCase().trim();\r\n  const normalizedKeyphrase = keyphrase.toLowerCase().trim();\r\n  const escapedKeyphrase = escapeRegExp(normalizedKeyphrase);\r\n  const totalWords = normalizedContent.split(/\\s+/).filter(word => word.length > 0).length;\r\n  const regex = new RegExp(`\\\\b${escapedKeyphrase}\\\\b`, 'gi');\r\n  const matches = normalizedContent.match(regex) || [];\r\n  const occurrences = matches.length;\r\n  const density = (occurrences * (normalizedKeyphrase.split(/\\s+/).length)) / totalWords * 100;\r\n  return { density, occurrences, totalWords };\r\n}\r\n\r\nfunction isHomePage(url: string): boolean {\r\n  try {\r\n    const urlObj = new URL(url);\r\n    return urlObj.pathname === \"/\" || urlObj.pathname === \"\";\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nconst checkPriorities: Record<string, 'high' | 'medium' | 'low'> = {\r\n  \"Keyphrase in Title\": \"high\",\r\n  \"Keyphrase in Meta Description\": \"high\",\r\n  \"Keyphrase in URL\": \"medium\",\r\n  \"Content Length\": \"high\",\r\n  \"Keyphrase Density\": \"medium\",\r\n  \"Keyphrase in Introduction\": \"medium\",\r\n  \"Image Alt Attributes\": \"low\",\r\n  \"Internal Links\": \"medium\",\r\n  \"Outbound Links\": \"low\"\r\n};\r\n\r\nfunction getSuccessMessage(checkType: string, url: string): string {\r\n  const messages: Record<string, string> = {\r\n    \"Keyphrase in Title\": \"Great job! Your title includes the target keyphrase.\",\r\n    \"Keyphrase in Meta Description\": \"Perfect! Your meta description effectively uses the keyphrase.\",\r\n    \"Keyphrase in URL\": isHomePage(url) ? \"All good here, since it's the homepage! \u2728\" : \"Excellent! Your URL is SEO-friendly with the keyphrase.\",\r\n    \"Content Length\": \"Well done! Your content length is good for SEO.\",\r\n    \"Keyphrase Density\": \"Perfect! Your keyphrase density is within the optimal range.\",\r\n    \"Keyphrase in Introduction\": \"Excellent! You've included the keyphrase in your introduction.\",\r\n    \"Image Alt Attributes\": \"Well done! Your images are properly optimized with the keyphrase.\",\r\n    \"Internal Links\": \"Perfect! You have a good number of internal links.\",\r\n    \"Outbound Links\": \"Excellent! You've included relevant outbound links.\"\r\n  };\r\n  return messages[checkType] || \"Good job!\";\r\n}\r\n\r\nconst fallbackRecommendations: Record<string, (...args: any[]) => string> = {\r\n  \"Keyphrase in Title\": (keyphrase: string, title: string) => \r\n    `Consider rewriting your title to include '${keyphrase}', preferably at the beginning. Here is a better title: \"${keyphrase} - ${title}\"`,\r\n  \"Keyphrase in Meta Description\": (keyphrase: string, metaDescription: string) =>\r\n    `Add '${keyphrase}' to your meta description in a natural way that encourages clicks. Here is a better meta description: \"${metaDescription ? metaDescription.substring(0, 50) : 'Learn about'} ${keyphrase} ${metaDescription ? metaDescription.substring(50, 100) : 'and discover how it can help you'}.\"`,\r\n  \"Keyphrase in Introduction\": (keyphrase: string) =>\r\n    `Mention '${keyphrase}' in your first paragraph to establish relevance early.`,\r\n  \"Image Alt Attributes\": (keyphrase: string) =>\r\n    `Add descriptive alt text containing '${keyphrase}' to at least one relevant image.`,\r\n  \"Internal Links\": () =>\r\n    `Add links to other relevant pages on your site to improve navigation and SEO.`,\r\n  \"Outbound Links\": () =>\r\n    `Link to reputable external sources to increase your content's credibility.`\r\n};\r\n\r\nasync function scrapeWebpage(url: string): Promise<any> {\r\n  console.log(`Scraping webpage: ${url}`);\r\n  try {\r\n    if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\r\n      url = `https://${url}`;\r\n    }\r\n    const response = await fetch(url);\r\n    if (!response.ok) throw new Error(`Failed to fetch page: ${response.status} ${response.statusText}`);\r\n    const html = await response.text();\r\n    const titleMatch = html.match(/<title[^>]*>(.*?)<\\/title>/i);\r\n    const title = titleMatch ? titleMatch[1].trim() : \"\";\r\n    const metaDescriptionMatch = html.match(/<meta\\s+name=[\"']description[\"']\\s+content=[\"'](.*?)[\"']/i);\r\n    const metaDescription = metaDescriptionMatch ? metaDescriptionMatch[1].trim() : \"\";\r\n    const bodyMatch = html.match(/<body[^>]*>([\\s\\S]*)<\\/body>/i);\r\n    const bodyContent = bodyMatch ? bodyMatch[1] : \"\";\r\n    const content = bodyContent.replace(/<[^>]+>/g, ' ').replace(/\\s+/g, ' ').trim();\r\n    const paragraphs: string[] = [];\r\n    const paragraphMatches = bodyContent.matchAll(/<p[^>]*>(.*?)<\\/p>/gi);\r\n    for (const match of paragraphMatches) {\r\n      const text = match[1].replace(/<[^>]+>/g, ' ').trim();\r\n      if (text) paragraphs.push(text);\r\n    }\r\n    const images: Array<{ src: string; alt: string }> = [];\r\n    const imageMatches = bodyContent.matchAll(/<img[^>]*src=[\"'](.*?)[\"'][^>]*alt=[\"'](.*?)[\"'][^>]*>/gi);\r\n    for (const match of imageMatches) {\r\n      images.push({ src: match[1], alt: match[2] });\r\n    }\r\n    const baseUrl = new URL(url);\r\n    const internalLinks: string[] = [];\r\n    const outboundLinks: string[] = [];\r\n    const linkMatches = bodyContent.matchAll(/<a[^>]*href=[\"'](.*?)[\"'][^>]*>/gi);\r\n    for (const match of linkMatches) {\r\n      try {\r\n        const href = match[1];\r\n        if (href.startsWith('#') || href.startsWith('javascript:')) continue;\r\n        const linkUrl = new URL(href, baseUrl.origin);\r\n        if (linkUrl.hostname === baseUrl.hostname) {\r\n          internalLinks.push(href);\r\n        } else {\r\n          outboundLinks.push(href);\r\n        }\r\n      } catch (e) {\r\n        // Skip invalid URLs\r\n      }\r\n    }\r\n    return {\r\n      title,\r\n      metaDescription,\r\n      content,\r\n      paragraphs,\r\n      images,\r\n      internalLinks,\r\n      outboundLinks,\r\n      url\r\n    };\r\n  } catch (error: any) {\r\n    console.error(`Error scraping webpage: ${error.message}`);\r\n    throw new Error(`Failed to scrape webpage: ${error.message}`);\r\n  }\r\n}\r\n\r\nasync function analyzeSEO(url: string, keyphrase: string): Promise<any> {\r\n  console.log(`Analyzing SEO for URL: ${url}, keyphrase: ${keyphrase}`);\r\n  try {\r\n    const scrapedData = await scrapeWebpage(url);\r\n    const checks: any[] = [];\r\n    let passedChecks = 0;\r\n    let failedChecks = 0;\r\n    const addCheck = (title: string, description: string, passed: boolean, recommendation = \"\") => {\r\n      let finalDescription = passed ? getSuccessMessage(title, url) : description;\r\n      let finalRecommendation = \"\";\r\n      if (!passed) {\r\n        switch (title) {\r\n          case \"Keyphrase in Title\":\r\n            finalRecommendation = fallbackRecommendations[title](keyphrase, scrapedData.title);\r\n            break;\r\n          case \"Keyphrase in Meta Description\":\r\n            finalRecommendation = fallbackRecommendations[title](keyphrase, scrapedData.metaDescription);\r\n            break;\r\n          default:\r\n            finalRecommendation = fallbackRecommendations[title] ? fallbackRecommendations[title](keyphrase) : `Consider optimizing your content for the keyphrase \"${keyphrase}\" in relation to ${title.toLowerCase()}.`;\r\n        }\r\n      }\r\n      if (passed) {\r\n        passedChecks++;\r\n      } else {\r\n        failedChecks++;\r\n      }\r\n      const priority = checkPriorities[title] || \"medium\";\r\n      checks.push({ title, description: finalDescription, passed, recommendation: finalRecommendation, priority });\r\n    };\r\n    \r\n    addCheck(\r\n      \"Keyphrase in Title\",\r\n      \"The focus keyphrase should appear in the page title\",\r\n      scrapedData.title.toLowerCase().includes(keyphrase.toLowerCase())\r\n    );\r\n    \r\n    addCheck(\r\n      \"Keyphrase in Meta Description\",\r\n      \"The meta description should contain the focus keyphrase\",\r\n      Boolean(scrapedData.metaDescription && scrapedData.metaDescription.toLowerCase().includes(keyphrase.toLowerCase()))\r\n    );\r\n    \r\n    const isHome = isHomePage(url);\r\n    addCheck(\r\n      \"Keyphrase in URL\",\r\n      isHome\r\n        ? \"This is the homepage URL, so the keyphrase is not required in the URL \u2728\"\r\n        : \"The URL should contain the focus keyphrase\",\r\n      isHome || url.toLowerCase().includes(keyphrase.toLowerCase())\r\n    );\r\n    \r\n    const minWordCount = 300;\r\n    const wordCount = scrapedData.content.split(/\\s+/).length;\r\n    addCheck(\r\n      \"Content Length\",\r\n      `Your content has ${wordCount} words. For good SEO, aim for at least ${minWordCount} words to provide comprehensive coverage of your topic.`,\r\n      wordCount >= minWordCount\r\n    );\r\n    \r\n    const densityResult = calculateKeyphraseDensity(scrapedData.content, keyphrase);\r\n    addCheck(\r\n      \"Keyphrase Density\",\r\n      `Keyphrase density should be between 0.5% and 2.5%. Current density: ${densityResult.density.toFixed(1)}% (${densityResult.occurrences} occurrences in ${densityResult.totalWords} words)`,\r\n      densityResult.density >= 0.5 && densityResult.density <= 2.5\r\n    );\r\n    \r\n    const firstParagraph = scrapedData.paragraphs[0] || \"\";\r\n    addCheck(\r\n      \"Keyphrase in Introduction\",\r\n      \"The focus keyphrase should appear in the first paragraph to establish topic relevance early\",\r\n      firstParagraph.toLowerCase().includes(keyphrase.toLowerCase())\r\n    );\r\n    \r\n    const altTextsWithKeyphrase = scrapedData.images.some((img: { alt: string }) => img.alt?.toLowerCase().includes(keyphrase.toLowerCase()));\r\n    addCheck(\r\n      \"Image Alt Attributes\",\r\n      \"At least one image should have an alt attribute containing the focus keyphrase\",\r\n      altTextsWithKeyphrase\r\n    );\r\n    \r\n    const hasInternalLinks = scrapedData.internalLinks.length > 0;\r\n    addCheck(\r\n      \"Internal Links\",\r\n      \"The page should contain internal links to other pages\",\r\n      hasInternalLinks\r\n    );\r\n    \r\n    const hasOutboundLinks = scrapedData.outboundLinks.length > 0;\r\n    addCheck(\r\n      \"Outbound Links\",\r\n      \"The page should contain outbound links to authoritative sources\",\r\n      hasOutboundLinks\r\n    );\r\n    \r\n    const score = Math.round((passedChecks / checks.length) * 100);\r\n    return { checks, passedChecks, failedChecks, url, score, timestamp: new Date().toISOString() };\r\n  } catch (error: any) {\r\n    console.error(`Error analyzing SEO: ${error.message}`);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Worker event handler\r\n// @ts-ignore: Cloudflare Workers specific API\r\naddEventListener('fetch', (event: any) => {\r\n  event.respondWith(handleRequest(event.request));\r\n});\r\n\r\nasync function handleRequest(request: Request): Promise<Response> {\r\n  const corsResponse = handleCors(request);\r\n  if (corsResponse) return corsResponse;\r\n  \r\n  const url = new URL(request.url);\r\n  const path = url.pathname;\r\n  const origin = request.headers.get('Origin');\r\n  const corsHeaders = {\r\n    'Access-Control-Allow-Origin': origin || '*',\r\n    'Content-Type': 'application/json'\r\n  };\r\n  \r\n  console.log(`Handling request: ${request.method} ${path} from ${origin || 'unknown origin'}`);\r\n  \r\n  if (path === '/api/analyze' && request.method === 'HEAD') {\r\n    return new Response(null, { status: 200, headers: corsHeaders });\r\n  }\r\n  \r\n  try {\r\n    if (path === '/api/analyze' && request.method === 'POST') {\r\n      const data = await request.json();\r\n      const { keyphrase, url } = data;\r\n      if (!keyphrase || !url) {\r\n        return new Response(JSON.stringify({ message: \"Keyphrase and URL are required\" }), { status: 400, headers: corsHeaders });\r\n      }\r\n      const results = await analyzeSEO(url, keyphrase);\r\n      return new Response(JSON.stringify(results), { status: 200, headers: corsHeaders });\r\n    } else if (path === '/api/register-domains' && request.method === 'POST') {\r\n      const data = await request.json();\r\n      const { domains } = data;\r\n      if (!domains || !Array.isArray(domains)) {\r\n        return new Response(JSON.stringify({ success: false, message: \"Domains array is required\" }), { status: 400, headers: corsHeaders });\r\n      }\r\n      return new Response(JSON.stringify({ success: true, message: `Successfully registered ${domains.length} domains.` }), { status: 200, headers: corsHeaders });\r\n    }\r\n    else if (path === '/api/ping' && (request.method === 'GET' || request.method === 'HEAD')) {\r\n      return new Response(JSON.stringify({ status: 'ok', message: 'Worker is running', timestamp: new Date().toISOString() }), { status: 200, headers: corsHeaders });\r\n    }\r\n    return new Response(JSON.stringify({ message: \"Route not found\", path }), { status: 404, headers: corsHeaders });\r\n  } catch (error: any) {\r\n    console.error(\"Error processing request:\", error);\r\n    return new Response(JSON.stringify({ message: \"Internal server error\", error: error.message }), { status: 500, headers: corsHeaders });\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["ctx", "url"]
}
